<!--
  WARNING: DO NOT CHANGE THIS FILE MANUALLY.
  This file is auto-generated by terraform-docs, any changes made here will be overwritten.
-->

<!-- BEGIN_TF_DOCS -->
# Terraform Module Template

Brief description about module.

<!-- markdownlint-disable no-inline-html -->

## Examples

<!--
  INFORMATION: Add new examples in the `.terraform-docs.yml` file.
-->

```hcl
/*
 * # Foo
 *
 * Brief description about example.
 *
 */

module "main" {
  source = "../.."
}
```

## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | 1.13.5 |

## Providers

No providers.

## Modules

No modules.

## Resources

No resources.

## Inputs

No inputs.

## Outputs

No outputs.

<!-- markdownlint-disable-next-line first-line-heading -->
## Development

### Prerequisites

- [checkov](https://www.checkov.io/1.Welcome/Quick%20Start.html) (use [uv](https://docs.astral.sh/uv/getting-started/installation/) instead of `pip`)
- [commitizen](https://commitizen-tools.github.io/commitizen/#installation) (use [uv](https://docs.astral.sh/uv/getting-started/installation/) instead of `pip`)
- [pre-commit](https://pre-commit.com/#install) (use [uv](https://docs.astral.sh/uv/getting-started/installation/) instead of `pip`)
- [terraform-docs](https://terraform-docs.io/user-guide/installation/)
- [tflint](https://github.com/terraform-linters/tflint?tab=readme-ov-file#installation)
- [tfupdate](https://github.com/minamijoyo/tfupdate?tab=readme-ov-file#install)
- [trivy](https://trivy.dev/docs/latest/getting-started/installation/)
- [terraform](https://developer.hashicorp.com/terraform/install) (I **highly** recommend using [tenv](https://github.com/tofuutils/tenv?tab=readme-ov-file#installation) to manage your Terraform versions)

### Directory structure

```shell
tf-module-template    # Main module root directory
├── docs              # Documentation related files
├── examples          # Example submodules directory
│   └── foo           # └── Foo example submodule
├── modules           # Submodules directory
│   └── bar           # └── Bar submodule
└── tests             # Tests directory
    ├── *.tftest.hcl  # └── Test files
    └── setup         # └── Submodule for test setup (example)
```

### Make

A `Makefile` has been created to abstract the execution of various tools for tasks such as documentation generation, linting and static analysis.

To check the available targets, run `make help` (or just `make`):

```shell
$ make help
# Usage:
#   make <target>
#
# Targets:
#   Build:
#     docs                Generate documentation (requires terraform-docs)
#     init                Init all modules in this repository (main module, modules, examples and tests)
#   Clean:
#     clean               Remove '.terraform' directories and lock files recursively
#   Test:
#     checkov             Run checkov using the '.checkov-config.yaml' configuration file
#     fmt                 Format Terraform files recursively
#     test                Run terraform test
#     tflint              Run tflint using the '.tflint.hcl' configuration file
#     tfupdate            Run tfupdate
#     trivy               Run trivy using the '.trivy.yaml' configuration file
#     validate            Validate all modules in this repository (main module, modules, examples and tests)
#   Release:
#     bump                Bump semantic version based on the git log and generate changelog
#     pre-commit          Configure pre-commit and run on all the files in the repo
#   Help:
#     help                Show this help
```

### [Pre-commit](https://pre-commit.com/)

`pre-commit` is a framework for managing and maintaining git hook scripts. Git hooks run on every commit to automatically point out issues in code, documentation and other configuration files.

Install the git hook scripts and run `pre-commit` against all the files with:

```shell
make pre-commit
```

### [Commitizen](https://commitizen-tools.github.io/commitizen/)

`commitizen` is a release management tool that helps teams maintain consistent and meaningful commit messages while automating version management.

What `commitizen` does:

- Write clear, structured commit messages
- Automatically manage version numbers using [semantic versioning](https://semver.org/)
- Generate and maintain changelogs
- Streamline the release process

Create a new commit:

```shell
# Add files for commit
$ git add changed_file.tf

# Create new commit with commitizen
$ cz c
```

### Release

This project uses `commitizen` to automate the release process.

To release a new version tag, run:

```shell
make bump
```

The `bump` target automates the following steps:

- Run the `commitizen` bump command (`cz bump`):
  - Bump the semantic version based on the git log
  - Generate the project documentation with `terraform-docs` (check `pre_bump_hooks` in `.cz.toml`)
  - Update the `CHANGELOG.md` file with the version changes
  - Update the project version in the specified files (check `version_files` in `.cz.toml`)
  - Generate a new `chore(release)` commit, triggering the git hooks with `pre-commit`
- Run `git push` commands to push the release commit/tag
<!-- END_TF_DOCS -->
